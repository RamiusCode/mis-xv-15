---
// Contador.astro
---

<section class="py-12 md:py-16 relative overflow-hidden">
  <!-- Fondo elegante con gradiente -->
  <div class="absolute inset-0 bg-gradient-to-b from-[#fffaf5]/40 via-[#fff5f5]/20 to-[#fffaf5]/40 z-0"></div>

  <div class="max-w-6xl mx-auto relative px-4">
    
    <!-- üå∏ FLORES LATERALES IZQUIERDA - DEBAJO, AL CENTRO -->
    <div class="absolute left-0 top-1/2 -translate-y-1/2 w-20 md:w-24 lg:w-28 pointer-events-none z-0" id="flor-lateral-izq">
      <img src="/imagenes/FloresIzquierda.webp" alt="Flores izquierda" class="w-full h-auto object-contain " />
    </div>

    <!-- üå∏ FLORES LATERALES DERECHA - DEBAJO, AL CENTRO -->
    <div class="absolute right-0 top-1/2 -translate-y-1/2 w-20 md:w-24 lg:w-28 pointer-events-none z-0" id="flor-lateral-der">
      <img src="/imagenes/FloresDerecha.webp" alt="Flores derecha" class="w-full h-auto object-contain " />
    </div>
    
    <!-- CARD CONTENEDOR PRINCIPAL - ENCIMA DE LAS FLORES -->
    <div class="relative bg-white/95 backdrop-blur-sm rounded-3xl  border-2 border-[#a27735]/30 py-8 md:py-10 lg:py-12 px-8 md:px-12 lg:px-16 z-10 max-w-4xl mx-auto" id="card-contador">
      
      <!-- ‚è∞ CONTADOR ELEGANTE EN FILA -->
      <div class="relative" id="contador-container">
        
        <!-- Contador en fila sin cuadrados -->
        <div class="flex items-center justify-center gap-3 md:gap-6 lg:gap-8">
          
          <!-- D√çAS -->
          <div class="flex flex-col items-center grupo-numero">
            <div class="font-charm text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-none numero-elegante" id="dias">00</div>
            <div class="text-base md:text-lg lg:text-xl text-[#95303a] uppercase tracking-wide font-charm mt-2 md:mt-3 font-bold">D√≠as</div>
          </div>

          <!-- Separador elegante -->
          <div class="flex flex-col items-center gap-2 mb-6 md:mb-8 separador-elegante">
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
          </div>

          <!-- HORAS -->
          <div class="flex flex-col items-center grupo-numero">
            <div class="font-charm text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-none numero-elegante" id="horas">00</div>
            <div class="text-base md:text-lg lg:text-xl text-[#95303a] uppercase tracking-wide font-charm mt-2 md:mt-3 font-bold">Horas</div>
          </div>

          <!-- Separador elegante -->
          <div class="flex flex-col items-center gap-2 mb-6 md:mb-8 separador-elegante">
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
          </div>

          <!-- MINUTOS -->
          <div class="flex flex-col items-center grupo-numero">
            <div class="font-charm text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-none numero-elegante" id="minutos">00</div>
            <div class="text-base md:text-lg lg:text-xl text-[#95303a] uppercase tracking-wide font-charm mt-2 md:mt-3 font-bold">Minutos</div>
          </div>

          <!-- Separador elegante -->
          <div class="flex flex-col items-center gap-2 mb-6 md:mb-8 separador-elegante">
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
            <div class="w-2 h-2 rounded-full bg-gradient-to-br from-[#a27735] to-[#c9a55e] shadow-lg"></div>
          </div>

          <!-- SEGUNDOS -->
          <div class="flex flex-col items-center grupo-numero">
            <div class="font-charm text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-none numero-elegante" id="segundos">00</div>
            <div class="text-base md:text-lg lg:text-xl text-[#95303a] uppercase tracking-wide font-charm mt-2 md:mt-3 font-bold">Segundos</div>
          </div>

        </div>

      </div>

    </div>
    
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== 'undefined') {
    document.addEventListener("DOMContentLoaded", () => {
      console.log("‚è∞ Iniciando contador elegante...");

      // üéØ FECHA DEL EVENTO: 8 de Noviembre 2025
      const fechaEvento = new Date("2025-11-08T00:00:00").getTime();

      // ‚è∞ FUNCI√ìN DEL CONTADOR
      function actualizarContador() {
        const ahora = new Date().getTime();
        const diferencia = fechaEvento - ahora;

        if (diferencia > 0) {
          const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
          const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
          const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);

          const diasEl = document.getElementById("dias");
          const horasEl = document.getElementById("horas");
          const minutosEl = document.getElementById("minutos");
          const segundosEl = document.getElementById("segundos");

          if (diasEl) diasEl.textContent = String(dias).padStart(2, "0");
          if (horasEl) horasEl.textContent = String(horas).padStart(2, "0");
          if (minutosEl) minutosEl.textContent = String(minutos).padStart(2, "0");
          if (segundosEl) segundosEl.textContent = String(segundos).padStart(2, "0");
        } else {
          const diasEl = document.getElementById("dias");
          const horasEl = document.getElementById("horas");
          const minutosEl = document.getElementById("minutos");
          const segundosEl = document.getElementById("segundos");

          if (diasEl) diasEl.textContent = "00";
          if (horasEl) horasEl.textContent = "00";
          if (minutosEl) minutosEl.textContent = "00";
          if (segundosEl) segundosEl.textContent = "00";
        }
      }

      actualizarContador();
      setInterval(actualizarContador, 1000);

      // üéØ ESTADO INICIAL
      gsap.set("#flor-lateral-izq", { opacity: 0, x: -60 });
      gsap.set("#flor-lateral-der", { opacity: 0, x: 60 });
      gsap.set("#card-contador", { opacity: 0, scale: 0.95, y: 30 });

      // ‚ú® ANIMACIONES
      ScrollTrigger.create({
        trigger: "#card-contador",
        start: "top 85%",
        end: "top 20%",
        onEnter: () => {
          const tl = gsap.timeline();

          // Card contador aparece con escala
          tl.to("#card-contador", {
            opacity: 1,
            scale: 1,
            y: 0,
            duration: 1,
            ease: "back.out(1.3)",
          })

          // Flores laterales se deslizan
          .to("#flor-lateral-izq, #flor-lateral-der", {
            opacity: 1,
            x: 0,
            duration: 1.2,
            ease: "power3.out",
          }, "-=0.6");
        },
        onLeaveBack: () => {
          gsap.set("#flor-lateral-izq", { opacity: 0, x: -60 });
          gsap.set("#flor-lateral-der", { opacity: 0, x: 60 });
          gsap.set("#card-contador", { opacity: 0, scale: 0.95, y: 30 });
        },
      });

      // üå∏ ANIMACIONES CONTINUAS ELEGANTES
      
      // Flores completamente est√°ticas (sin movimiento)

      // Separadores pulsando
      gsap.to(".separador-elegante", {
        scale: 1.3,
        opacity: 0.6,
        duration: 2,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        stagger: 0.2,
      });

      // Resplandor sutil en n√∫meros
      gsap.to(".numero-elegante", {
        textShadow: "0 0 20px rgba(162, 119, 53, 0.5), 0 4px 8px rgba(162, 119, 53, 0.3)",
        duration: 3,
        ease: "sine.inOut",
        yoyo: true,
        repeat: -1,
        stagger: 0.4,
      });

      console.log("‚è∞‚ú® ¬°Contador elegante activado!");
    });
  }
</script>

<style>
  /* N√∫meros con gradiente dorado brillante */
  .numero-elegante {
    background: linear-gradient(135deg, #a27735 0%, #d4af37 50%, #a27735 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 4px 12px rgba(162, 119, 53, 0.3);
    transition: all 0.4s ease;
  }

  /* Hover en los grupos de n√∫meros */
  .grupo-numero:hover .numero-elegante {
    transform: scale(1.1);
    filter: drop-shadow(0 8px 16px rgba(162, 119, 53, 0.4));
  }

  /* Separadores elegantes */
  .separador-elegante {
    opacity: 0.7;
    transition: all 0.3s ease;
  }

  /* Animaci√≥n de resplandor en el card principal */
  #card-contador {
    transition: all 0.3s ease;
  }

  #card-contador:hover {
    box-shadow: 0 20px 60px rgba(162, 119, 53, 0.25);
    transform: translateY(-5px);
  }
</style>